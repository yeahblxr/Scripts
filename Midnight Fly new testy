local main = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local up = Instance.new("TextButton")
local down = Instance.new("TextButton")
local onof = Instance.new("TextButton")
local TextLabel = Instance.new("TextLabel")
local plus = Instance.new("TextButton")
local speed = Instance.new("TextLabel")
local mine = Instance.new("TextButton")
local closebutton = Instance.new("TextButton")
local mini = Instance.new("TextButton")
local mini2 = Instance.new("TextButton")
local UICorner = Instance.new("UICorner")

main.Name = "main"
main.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
main.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
main.ResetOnSpawn = false

Frame.Parent = main
Frame.BackgroundColor3 = Color3.fromRGB(100, 100, 100) -- Gray background
Frame.BorderSizePixel = 0
Frame.Position = UDim2.new(0.100320168, 0, 0.379746825, 0)
Frame.Size = UDim2.new(0, 190, 0, 65) -- Taller to fit buttons inside

UICorner.CornerRadius = UDim.new(0, 15)
UICorner.Parent = Frame

-- Buttons and labels setup
up.Name = "up"
up.Parent = Frame
up.BackgroundColor3 = Color3.fromRGB(130, 130, 130)
up.Size = UDim2.new(0, 44, 0, 28)
up.Position = UDim2.new(0, 0, 0.6, 0)
up.Font = Enum.Font.SourceSans
up.Text = "UP"
up.TextColor3 = Color3.fromRGB(0, 0, 0)
up.TextSize = 14

down.Name = "down"
down.Parent = Frame
down.BackgroundColor3 = Color3.fromRGB(160, 160, 160)
down.Position = UDim2.new(0, 50, 0.6, 0)
down.Size = UDim2.new(0, 44, 0, 28)
down.Font = Enum.Font.SourceSans
down.Text = "DOWN"
down.TextColor3 = Color3.fromRGB(0, 0, 0)
down.TextSize = 14

onof.Name = "onof"
onof.Parent = Frame
onof.BackgroundColor3 = Color3.fromRGB(190, 190, 190)
onof.Position = UDim2.new(0.7, 0, 0.6, 0)
onof.Size = UDim2.new(0, 56, 0, 28)
onof.Font = Enum.Font.SourceSans
onof.Text = "fly"
onof.TextColor3 = Color3.fromRGB(0, 0, 0)
onof.TextSize = 14

TextLabel.Parent = Frame
TextLabel.BackgroundTransparency = 1
TextLabel.Position = UDim2.new(0, 50, 0, 0)
TextLabel.Size = UDim2.new(0, 100, 0, 28)
TextLabel.Font = Enum.Font.SourceSans
TextLabel.Text = "FLY GUI V3"
TextLabel.TextColor3 = Color3.fromRGB(0, 0, 0)
TextLabel.TextScaled = true
TextLabel.TextWrapped = true

plus.Name = "plus"
plus.Parent = Frame
plus.BackgroundColor3 = Color3.fromRGB(130, 130, 130)
plus.Position = UDim2.new(0.3, 0, 0, 0)
plus.Size = UDim2.new(0, 45, 0, 28)
plus.Font = Enum.Font.SourceSans
plus.Text = "+"
plus.TextColor3 = Color3.fromRGB(0, 0, 0)
plus.TextScaled = true
plus.TextWrapped = true

speed.Name = "speed"
speed.Parent = Frame
speed.BackgroundTransparency = 1
speed.Position = UDim2.new(0.5, 0, 0.6, 0)
speed.Size = UDim2.new(0, 44, 0, 28)
speed.Font = Enum.Font.SourceSans
speed.Text = "1"
speed.TextColor3 = Color3.fromRGB(0, 0, 0)
speed.TextScaled = true
speed.TextWrapped = true

mine.Name = "mine"
mine.Parent = Frame
mine.BackgroundColor3 = Color3.fromRGB(130, 130, 130)
mine.Position = UDim2.new(0.3, 0, 0.6, 0)
mine.Size = UDim2.new(0, 45, 0, 28)
mine.Font = Enum.Font.SourceSans
mine.Text = "-"
mine.TextColor3 = Color3.fromRGB(0, 0, 0)
mine.TextScaled = true
mine.TextWrapped = true

-- Close button inside top-left corner
closebutton.Name = "Close"
closebutton.Parent = Frame
closebutton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
closebutton.Font = Enum.Font.SourceSansBold
closebutton.Size = UDim2.new(0, 30, 0, 30)
closebutton.Text = "X"
closebutton.TextSize = 24
closebutton.Position = UDim2.new(0, 5, 0, 5)

-- Minimize button inside top-right corner
mini.Name = "minimize"
mini.Parent = Frame
mini.BackgroundColor3 = Color3.fromRGB(150, 150, 150)
mini.Font = Enum.Font.SourceSansBold
mini.Size = UDim2.new(0, 30, 0, 30)
mini.Text = "-"
mini.TextSize = 24
mini.Position = UDim2.new(1, -35, 0, 5)

-- Minimize toggle button (hidden initially)
mini2.Name = "minimize2"
mini2.Parent = Frame
mini2.BackgroundColor3 = Color3.fromRGB(150, 150, 150)
mini2.Font = Enum.Font.SourceSansBold
mini2.Size = UDim2.new(0, 30, 0, 30)
mini2.Text = "+"
mini2.TextSize = 24
mini2.Position = UDim2.new(1, -35, 0, 40)
mini2.Visible = false

-- (You can keep your existing fly logic and connections here, this is just GUI styling)

-- Close button click
closebutton.MouseButton1Click:Connect(function()
    main:Destroy()
end)

-- Minimize button click: hide controls, show mini2
mini.MouseButton1Click:Connect(function()
    up.Visible = false
    down.Visible = false
    onof.Visible = false
    plus.Visible = false
    speed.Visible = false
    mine.Visible = false
    mini.Visible = false
    mini2.Visible = true
    Frame.BackgroundTransparency = 0.5
end)

-- Minimize2 button click: show controls, hide mini2
mini2.MouseButton1Click:Connect(function()
    up.Visible = true
    down.Visible = true
    onof.Visible = true
    plus.Visible = true
    speed.Visible = true
    mine.Visible = true
    mini.Visible = true
    mini2.Visible = false
    Frame.BackgroundTransparency = 0
end)
